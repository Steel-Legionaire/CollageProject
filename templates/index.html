<!DOCTYPE html>
<html>
  <head>
    <title> Collage Generator </title>
    <script src="https://unpkg.com/@panzoom/panzoom@4.6.0/dist/panzoom.min.js"></script>

  </head>
  <body>
    <h1>Upload an Image</h1>

    <form action="/" method="post" enctype="multipart/form-data">
      <label for="file"> Input Image: </label>
      <input type="file" name="file" accept="image/*" required> <br />
      <label for="resolution"> Resolution: </label>
      <input type="number" id="resolution" name="resolution" required> <br />
      <button type="submit">Upload</button>
    </form>

    {% if uploaded_image %}
      <h2>Original Image:</h2>
      <img src="{{ uploaded_image }}" alt="Uploaded image" width="300">
    {% endif %}

    {% if processed_image %}
        <h2>Processed Image:</h2>

        <div id="image-container" style="overflow: hidden; border: 1px solid #ccc;">   
            <img id="zoomable-image" src="{{ processed_image }}" style="width: 100%; height: auto; display: block;">
        </div>
    {% endif %}


    <script>
        const element = document.getElementById('zoomable-image');
        const panzoom = Panzoom(element, {
            maxScale: 100,
            contain: 'outside'
        });

        // Enable mouse wheel zooming
        element.parentElement.addEventListener('wheel', panzoom.zoomWithWheel);
    </script>

  </body>
</html>
